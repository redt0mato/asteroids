class t{constructor(t,s,n,i=0,a=0){this.ctx=t,this.type=e.ENTITY,this.radius=50,this.ctx=t,this._xPos=s,this._yPos=n,this._vel=[i,a]}updatePosition(){this.xPos+=this._vel[0],this.yPos+=this._vel[1]}set xPos(t){if(void 0===t)throw new Error("tried to set NaN or undefined");this._xPos=t}get xPos(){return this._xPos}set yPos(t){if(void 0===t)throw new Error("tried to set NaN or undefined");this._yPos=t}get yPos(){return this._yPos}get vel(){return this._vel}set vel(t){this._vel=t}draw(){this.ctx.beginPath(),this.ctx.strokeStyle="red",this.ctx.arc(this.xPos,this.yPos,this.radius,0,Math.PI),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.strokeStyle="blue",this.ctx.arc(this.xPos,this.yPos,this.radius,Math.PI,2*Math.PI),this.ctx.stroke()}}var e,s,n,i;(s=e||(e={}))[s.ASTEROID=0]="ASTEROID",s[s.SHIP=1]="SHIP",s[s.BULLET=2]="BULLET",s[s.ENTITY=3]="ENTITY";(i=n||(n={}))[i.UP=0]="UP",i[i.DOWN=1]="DOWN",i[i.LEFT=2]="LEFT",i[i.RIGHT=3]="RIGHT";class a extends t{constructor(){super(...arguments),this.type=e.SHIP,this.radius=15}power(t){const[e,s]=this.vel;let i=[e,s];t===n.UP?i=[e,s-1]:t===n.DOWN?i=[e,s+1]:t===n.LEFT?i=[e-1,s]:t===n.RIGHT&&(i=[e+1,s]),this.vel=[Math.abs(i[0])<=1.5?i[0]:i[0]/Math.abs(i[0]||1)*1.5,Math.abs(i[1])<=1.5?i[1]:i[1]/Math.abs(i[1]||1)*1.5]}fireBullet(t){if(-1===t.getInstance().entities.indexOf(this))return;const{ctx:e,xPos:s,yPos:n,vel:i,radius:a}=this,c=new o(e,s+2.25*a*(i[0]/Math.abs(i[0]||1)),n+2.25*a*(i[1]/Math.abs(i[1]||1)),i[0]/Math.abs(i[0]||1)*3,i[1]/Math.abs(i[1]||1)*3);new Set(["hi"]);t.getInstance().entities.push(c)}}class o extends t{constructor(){super(...arguments),this.type=e.BULLET,this.radius=5}}class c extends t{constructor(...t){super(t[0],t[1],t[2],1.2*Math.random(),1.2*Math.random()),this.type=e.ASTEROID}}function r(t,e){document.onkeydown=function(s){37===s.keyCode?t.power(n.LEFT):38===s.keyCode?t.power(n.UP):39===s.keyCode?t.power(n.RIGHT):40===s.keyCode?t.power(n.DOWN):32===s.keyCode&&t.fireBullet(e)}}function h(...t){const[e,s,n,i]=t;return function(t,e){return Math.sqrt(Math.pow(Math.abs(t[0]-e[0]),2)+Math.pow(Math.abs(t[1]-e[1]),2))}(e,s)<n+i}function d(t){const e=t.getInstance().entities;let s,n;for(let t=0;t<e.length;t++)for(let i=t+1;i<e.length;i++)if(s=e[t],n=e[i],s.type!==n.type&&h([s.xPos,s.yPos],[n.xPos,n.yPos],s.radius,n.radius)){const e=P.getInstance().entities;let s=e.slice(0,t);s=s.concat(e.slice(t+1,i)).concat(e.slice(i+1)),P.getInstance().entities=s}else console.log("nothing collided");const[i,a]=P.getInstance().entities}const u=document.getElementsByTagName("canvas")[0];var l=u.getContext("2d");console.log("running");class P{constructor(t){if(this.entities=[],this.maximumSpeed=1,this.isGameRunning=!0,P._instance)throw new Error("Error: Instantiation failed: Use GameWorld.getInstance() instead of new.");P._instance=this;const{height:e,width:s}=document.getElementsByTagName("canvas")[0],n=new a(t,s/2,e/2,0,0);this.ctx=t,P._instance.entities=[n];for(let e=0;e<5;e++)P._instance.entities.push(new c(t,Math.random()*u.width,Math.random()*u.height));r(n,P);const i=document.getElementById("startButton"),o=document.getElementById("stopButton");i&&i.addEventListener("click",(()=>{P._instance.isGameRunning=!0,requestAnimationFrame(P._instance.requestGameAnimationFrame)})),o&&o.addEventListener("click",(()=>{P._instance.isGameRunning=!1,P._instance.ctx.clearRect(0,0,u.width,u.height)}))}static getInstance(){return P._instance||(P._instance=new P(l)),P._instance}checkIfOutOfBounds(t){return t.xPos<-50?t.xPos=770:t.xPos>770&&(t.xPos=-50),t.yPos<-50?t.yPos=850:t.yPos>850&&(t.yPos=-50),!0}updatePositionOfEntity(t){}drawMap(){P._instance.ctx.clearRect(0,0,u.width,u.height),P._instance.entities.forEach((t=>{P._instance.checkIfOutOfBounds(t),t.draw(),t.updatePosition()}))}requestGameAnimationFrame(){!0===P._instance.isGameRunning&&(d(P._instance),P._instance.drawMap(),requestAnimationFrame(P._instance.requestGameAnimationFrame))}}P._instance=new P(l);P.getInstance();
//# sourceMappingURL=index.dabf9a24.js.map
